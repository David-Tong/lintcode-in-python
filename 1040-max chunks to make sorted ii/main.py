class Solution:
    """
    @param arr: an array of integers
    @return: number of chunks
    """
    def max_chunks_to_sorted(self, arr):
        # get the last number less than it
        N = len(arr)
        intervals = list()
        for x in range(N):
            has_less = False
            for y in range(N - 1, x, -1):
                if arr[y] < arr[x]:
                    intervals.append((x, y))
                    has_less = True
                    break
            if not has_less:
                intervals.append((x, x))

        # merge intervals
        limit = intervals[0][1]
        ans = 1
        for interval in intervals:
            if interval[0] <= limit:
                limit = max(limit, interval[1])
            else:
                ans += 1
                limit = interval[1]
        return ans


#arr = [5,4,3,2,1]
#arr = [2,1,3,4,4]
#arr = [2,1,3,4,4,2]
#arr = [2,1,3,4,4,1]
#arr = [1,2,3,4,5]
#arr = [10041771,24251798,20639598,55549599,42852711,68971047,7434485,87539016,53844396,50059864,54887223,82505673,71009669,85830003,3501198,6473410,707630,11572375,36489137,39323625,63630899,84898725,46365850,5799953,33765113,38226436,86922096,74592465,29006108,64169593,75208661,65358552,75161241,78725412,11053830,73375505,53974807,46767614,54593246,57627865,37730658,33735448,93944732,64070134,45913426,20994051,21646628,21812217,39155712,76895543,15230925,82067846,43475851,7185980,36693832,22210178,8940034,2615383,83307548,36003504,12490552,84056755,46635400,28036124,41283823,13731088,38715121,56115139,31937861,12258323,51746781,79247453,16294086,92852703,59271614,7820203,48884639,73245371,24087993,95808714,6771899,93250064,39318281,33817524,33922449,29816980,63611266,47299405,25931141,99142636,20461233,90948762,61291054,9339451,88633206,1175453,62704018,79429126,21619116,77790938,46803888,35730123,12773302,41877490,42358106,53224618,10992271,86323709,7146426,371359,26708808,34540705,25001441,21138020,75840307,18515765,25965198,4801090,99107922,90958872,2986578,68631221,80657581,28128403,57153378,4022203,80317945,5566003,96338913,55557580,5960771,33840755,11652008,75709256,99324875,62084989,18257124,45545789,12455353,80187368,73272844,12767130,53759077,48636958,16918843,67385429,51552220,94943230,36971857,32596726,24302328,86932547,86892670,64732413,50175987,21953786,3135978,4593891,56881521,66212799,77133156,87948043,48648632,26751325,82310044,39027094,37047463,46295736,59519524,31001344,60990352,30630754,98086044,18684874,15561083,52059980,33096487,67076261,34169102,55205719,60788937,26841048,23677836,10733154,60068329,29014476,98100161,81309989,56906202,20992998,84438336,84191013,42422646,72217037,2056775,78170031,43970911,36369254,75865355,80329094,35170103,6858247,37126443,49819883,73765191,35755950,30425102,88231371,20910431,48143570,8675518,28466077,67962556,84926233,26713950,91377455,49049219,40507256,35431005,55246828,94948712,39841692,56695779,86183474,88903535,65569581,39144355,27749401,54882273,95785328,28105495,70955544,94705183,89785038,67365254,61791014,81518202,14807740,1627274,27983246,52304979,90257703,8023817,45234362,40298565,74991175,96128729,40282260,67289980,20865224,13279578,51046421,79405434,90586058,11577399,44378608,24725718,72091200,53181075,61277419,37975369,67777598,34355478,15879343,69291806,47078396,32591170,41166155,83996200,37288915,74061354,85792323,36313572,11192982,6337145,6777783,41473389,91238304,31877678,36087275,34106516,31878473,69382622,61155883,8392946,68384205,63990656,82555893,60501568,72014172,60334375,55502261,41056204,37384968,45620816,54015324,60888105,49025490,71965414,33560623,71891235,41733500,35885242,79971973,8459544,49184258,25637911,97530785,78506801,27642832,48616268,15543687,50495186,21643135,9083898,79250311,62249923,74065697,4557605,82552073,94240687,77653333,21490149,19913756,7511641,57863832,81939290,76824388,67705199,69516979,30365315,20676008,57335332,39825462,41306958,90448392,4755868,34287045,85427807,45268719,15109021,75879403,74436577,12592964,22161950,6139563,45165187,58585429,15761230,80430857,7639129,94061550,65677216,81677036,63046486,2733239,12810748,29612918,46642931,48134347,54994258,61642356,59573459,55614859,95280859,51468300,96279073,19524236,87439191,45612562,52216206,81202910,81332972,81301349,85995225,89104989,7647523,446503,94923545,10348386,86292956,34574150,60639355,14891432,99577900,23377864,80713106,42988370,63285404,44778741,98854699,86525551,7426291,7131102,27313224,19968073,59230914,75909673,78382862,75870748,17887073,99559810,76513381,80214752,13527271,58384488,69135992,6694229,75140846,51827297,43774287,76555796,37711685,20833240,80927712,43991283,78653663,43072997,25870826,44616991,29974929,44504226,84233812,54147616,93565955,59389067,82268158,99045214,34671670,91610900,94723836,70736903,38784295,36619260,13759477,20164418,12431200,75367373,62780023,22452774,87758539,90586959,55582634,7032026,84988790,72354758,58356079,45674202,45777478,24616462,19488277,39230126,46875857,97033156,10717978,35227632,75847788,25707812,7540465,22041209,42916314,66793052,21980755,95519865,18143208,4477781,15073455,75423453,24168436,24212405,26171303,55074984,49334440,84250435,74087748,6179503,19777027,38453930,78752590,34361722]
arr = [5,4,9,1,6,7]

solution = Solution()
print(solution.max_chunks_to_sorted(arr))
